# ğŸ›’ Sistema de Vendas (Backend Core)

> **Autores:** Yuri e Ricardo
> **Tecnologia:** Java â˜•
> **VersÃ£o:** 1.0

---

## ğŸ“˜ 1. VisÃ£o Geral
Este projeto Ã© o **nÃºcleo (backend)** de um sistema de e-commerce robusto. Ele gerencia todo o fluxo de venda, desde o cadastro do produto atÃ© a baixa no estoque e pagamento.

**O sistema garante:**
* âœ… CÃ¡lculo financeiro com precisÃ£o bancÃ¡ria.
* âœ… Integridade de estoque.
* âœ… Regras de negÃ³cio validadas (Fail Fast).

---

## ğŸ› ï¸ 2. Arquitetura e DecisÃµes TÃ©cnicas

### ğŸ’° Dinheiro e PrecisÃ£o (`BigDecimal`)
Para evitar o famoso problema do *"centavo perdido"* em sistemas flutuantes (`double`), todo o sistema utiliza `java.math.BigDecimal`.
* **Regra de Ouro:** Todas as operaÃ§Ãµes usam `RoundingMode.HALF_EVEN` (Arredondamento BancÃ¡rio).
* **Resultado:** ConsistÃªncia total entre o valor do carrinho e o valor cobrado no cartÃ£o.

### ğŸ†” Identidade do Produto (SKU)
No mundo real, nomes mudam, mas o cÃ³digo de barras nÃ£o.
* A igualdade (`equals`/`hashCode`) do objeto `Produto` ignora o nome e foca exclusivamente no **CÃ³digo (SKU)**.
* Isso evita duplicidade e erros de cadastro.

### ğŸ“¦ GestÃ£o de Estoque Desacoplada
O estoque nÃ£o guarda o objeto `Produto`, mas sim o seu **CÃ³digo** (`String`).
* Isso permite movimentar o estoque atravÃ©s de IDs vindos de um front-end ou API, sem precisar instanciar o objeto completo.

---

## ğŸ“š 3. DicionÃ¡rio de Classes

### ğŸ·ï¸ Entidades
| Classe | Ãcone | DescriÃ§Ã£o |
| :--- | :---: | :--- |
| **`Produto`** | ğŸ‘• | Item imutÃ¡vel. Possui nome, cÃ³digo e preÃ§o. Valida dados obrigatÃ³rios no construtor. |
| **`Estoque`** | ğŸ­ | Controla a quantidade disponÃ­vel via `Map<String, Integer>`. |
| **`Carrinho`** | ğŸ›’ | Guarda a intenÃ§Ã£o de compra. Delega cÃ¡lculos para `UtilDinheiro`. |
| **`Pedido`** | ğŸ“ | O "recibo" final. Ã‰ um objeto imutÃ¡vel gerado apÃ³s o sucesso do pagamento. |

### âš™ï¸ UtilitÃ¡rios e Interfaces
| Classe | Ãcone | DescriÃ§Ã£o |
| :--- | :---: | :--- |
| **`UtilDinheiro`** | ğŸ’¸ | Calculadora central do sistema. Garante que `2 * 19.90` seja arredondado corretamente. |
| **`PoliticaDesconto`** | ğŸ“‰ | Interface (`Strategy Pattern`) para criar regras de promoÃ§Ã£o dinÃ¢micas. |
| **`GatewayPagamento`** | ğŸ’³ | Interface que simula a comunicaÃ§Ã£o com operadoras de cartÃ£o. |

---

## ğŸš€ 4. Fluxo de ExecuÃ§Ã£o (Exemplo)

1.  **Cadastro:** O gerente cadastra uma *"Camiseta"* (SKU-01) por `R$ 29,90`.
2.  **Estoque:** Adiciona-se **100 unidades** do SKU-01 no `Estoque`.
3.  **Compra:** O cliente adiciona 2 camisetas no `Carrinho`.
4.  **CÃ¡lculo:** O sistema calcula: `29.90 * 2 = 59.80` (usando `HALF_EVEN`).
5.  **Reserva:** O sistema verifica se hÃ¡ 2 itens disponÃ­veis e os **reserva** (baixa).
6.  **Checkout:** O pagamento Ã© processado e um `Pedido` Ã© gerado.

---

## ğŸ§ª 5. Testes e Qualidade
O sistema foi desenvolvido orientado a testes (TDD friendly).
* ğŸŸ¢ **UnitÃ¡rios:** Validam lÃ³gica de arredondamento e exceÃ§Ãµes.
* ğŸ›¡ï¸ **ExceÃ§Ãµes Tratadas:**
    * `QuantidadeInvalidaException`: ğŸš« Impede vender 0 ou negativo.
    * `SemEstoqueException`: ğŸš« Impede vender o que nÃ£o tem.
    * `IllegalArgumentException`: ğŸš« Impede dados nulos.

---